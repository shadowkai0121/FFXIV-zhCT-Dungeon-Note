---
import Layout from "../components/Layout.astro";

const withBase = (path: string): string => `${import.meta.env.BASE_URL}${path.replace(/^\//, "")}`;

const localImage = withBase("/media-sample/local-demo.svg");
const localVideo = withBase("/media-sample/local-demo.mp4");

const externalImage =
  "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/Final_Fantasy_XIV_at_Gamescom_2019_%2848461822276%29.jpg/1280px-Final_Fantasy_XIV_at_Gamescom_2019_%2848461822276%29.jpg";

const externalVideoPage = "https://www.youtube.com/watch?v=kgiuQwzB6aU";
const externalVideoEmbed = "https://www.youtube.com/embed/kgiuQwzB6aU";
---

<Layout title="媒體嵌入範例" description="示範本地圖片、外部圖片連結、本地影片與外部影片嵌入。">
  <section class="section-block">
    <div class="section-head">
      <h1>媒體嵌入範例頁</h1>
      <p>這頁示範四種常見需求：本地圖片、外部圖片連結、本地影片、外部影片連結嵌入。</p>
    </div>

    <h2>1) 本地圖片</h2>
    <p>來源：<code>{localImage}</code></p>
    <img
      src={localImage}
      alt="本地示範圖片"
      loading="lazy"
      style="display:block;width:100%;max-width:900px;border-radius:12px;border:1px solid var(--border);"
    />

    <h2>2) 外部圖片連結</h2>
    <p>
      外部圖片網址：
      <a href={externalImage} target="_blank" rel="noopener noreferrer">{externalImage}</a>
    </p>
    <p>下方也直接用同一個外部連結做預覽：</p>
    <img
      src={externalImage}
      alt="外部圖片預覽"
      loading="lazy"
      referrerpolicy="no-referrer"
      style="display:block;width:100%;max-width:900px;border-radius:12px;border:1px solid var(--border);"
    />

    <h2>3) 本地影片</h2>
    <p>來源：<code>{localVideo}</code></p>
    <video
      controls
      preload="metadata"
      style="display:block;width:100%;max-width:900px;border-radius:12px;border:1px solid var(--border);background:#000;"
    >
      <source src={localVideo} type="video/mp4" />
      你的瀏覽器不支援影片播放。
    </video>

    <h2>4) 外部影片連結嵌入</h2>
    <p>
      原始連結：
      <a href={externalVideoPage} target="_blank" rel="noopener noreferrer">{externalVideoPage}</a>
    </p>
    <div style="position:relative;width:100%;max-width:900px;padding-top:56.25%;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#000;">
      <iframe
        src={externalVideoEmbed}
        title="外部影片嵌入示範"
        loading="lazy"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
        allowfullscreen
        style="position:absolute;inset:0;width:100%;height:100%;border:0;"
      ></iframe>
    </div>
  </section>
</Layout>
